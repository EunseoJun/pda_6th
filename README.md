# EC2 인스턴스 유형별 성능 비교 보고서 (hey 부하 테스트 기준)

## ✅ 개요

본 보고서는 AWS EC2의 주요 인스턴스 유형(`m5.large`, `m5.xlarge`, `c5.large`, `c5.xlarge`)에 대해 동일한 API 부하 테스트를 수행하고, 요청량별 성능을 비교한 결과를 바탕으로 작성되었습니다. 

테스트는 Flask로 구성한 `/api/calc` 라우트를 대상으로 `hey` 도구를 활용해 수행되었으며, 요청량은 각각 100, 1000, 5000으로 설정하였습니다.

---

## ✅ 테스트 환경

- **API 경로**: `/api/calc` (Python - Flask)
- **계산 내용**: `sum([i**2 for i in range(1, 100000)])` → CPU 부하 유도
- **부하 도구**: `hey`
- **요청량**: 100, 1000, 5000 (각각 3회 실행 후 평균값 사용)
- **동시 요청 수**: 50 (고정)

---

## 📊 평균 응답 시간 (단위: 초)

| 요청량 | m5.large | m5.xlarge | c5.large | c5.xlarge |
|--------|----------|-----------|----------|-----------|
| 100    | 0.3233   | 0.3286    | **0.2587** | 0.2767    |
| 1000   | 0.3963   | 0.4105    | 0.3396   | **0.3364** |
| 5000   | 0.4101   | 0.4098    | **0.3393** | 0.3355    |

---

## 📈 평균 처리 속도 (Requests/sec)

| 요청량 | m5.large | m5.xlarge | c5.large | c5.xlarge |
|--------|----------|-----------|----------|-----------|
| 100    | 120.24   | 122.38    | **149.07** | 143.73    |
| 1000   | 123.32   | 121.64    | 146.58   | **145.56** |
| 5000   | 121.35   | 121.98    | **146.74** | 148.35    |

---

## 📌 분석 및 해석

### 🧠 1. CPU 최적화 인스턴스의 강력한 성능
- `c5.large`와 `c5.xlarge`는 모든 요청량에서 **가장 낮은 응답 시간**과 **높은 처리량**을 보였습니다.
- 특히 `c5.xlarge`는 요청량 5000에도 **평균 응답 시간 0.33초 수준을 유지**하며, 고부하 상황에서도 안정적인 성능을 발휘했습니다.

### ⚖️ 2. 범용 인스턴스는 예측 가능한 부하에 적합
- `m5.large`, `m5.xlarge`는 중간 수준의 요청까지는 무난하게 대응 가능하나,
  - 요청량 1000 이상에서는 `c5` 계열 대비 **약 0.07~0.08초 정도 더 느린 응답 시간**을 보였습니다.
- 처리량(RPS)도 `c5` 계열보다 20~25% 낮은 수준입니다.

---

## 🔍 결론 및 인스턴스 추천

| 상황                         | 추천 인스턴스   | 이유 |
|------------------------------|------------------|------|
| 가벼운 API / 비용 민감한 경우 | `m5.large`       | 저렴한 비용, 예측 가능한 요청에 적합 |
| 중~대규모 API 서비스         | `c5.large`       | 낮은 응답 시간, 높은 처리 속도 |
| 고부하 트래픽 / 대용량 처리   | `c5.xlarge`      | 안정적이며 빠른 응답 유지 |
| 범용 + 확장 고려             | `m5.xlarge`      | 다용도 용도로 확장 시 사용 가능 |

---

## 📝 부록

- 모든 테스트는 동일한 AMI 환경에서 수행되었으며, 성능 외 변수는 최소화되었습니다.
- 네트워크 지연, 워밍업 타임, 백그라운드 프로세스는 실측치에 약간의 영향을 미칠 수 있습니다.

